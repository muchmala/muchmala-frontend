<%- partial('title') %>
<%- partial('panel') %>
<%- partial('browser') %>

<div id="display">
<div id="viewport"><div class="puzzle">
    <div class="frame">
        <div class="corner tl"></div>
        <div class="corner tr"></div>
        <div class="corner bl"></div>
        <div class="corner br"></div>
    </div>
</div>
</div>
</div>

<%- partial('dialogs/menu') %>
<%- partial('dialogs/twenty') %>
<%- partial('dialogs/name') %>
<%- partial('dialogs/complete') %>
<%- partial('dialogs/create') %>
<%- partial('dialogs/signup') %>
<%- partial('dialogs/forgot') %>
<%- partial('dialogs/auth') %>

<script>
    window.Puzz = {Utils: {}, Models: {}, Collections: {}, Helpers: {}, Views: {}};
    window.STATIC_HOST = '<%=config.staticUrl%>';
    window.SOCKET_SERVERS = <%-socketIoServers%>;
    window.IO_HOST = window.SOCKET_SERVERS[0].host;
    window.IO_PORT = window.SOCKET_SERVERS[0].port;
</script>

<% if (config.minified) { %>
<script src="<%=config.staticUrl%>/<%=config.version%>/minified.js"></script>
<% } else {
    [ '/js/socket.io/socket.io.js'

    , '/js/jquery/jquery.min.js'
    , '/js/jquery/jquery-ui.js'
    , '/js/jquery/jquery.cookie.js'
    , '/js/jquery/jquery.scraggable/jquery.scraggable.js'
    , '/js/jquery/jquery.viewport/jquery.viewport.js'
    , '/js/jquery/jquery.scrolla/jquery.scrolla.js'

    , '/js/utils.js'
    , '/js/third/aim.js'
    , '/js/third/flow.js'
    , '/js/third/underscore.js'
    
    , '/js/backbone/backbone.js'
    , '/js/backbone/backbone.io.js'
    
    , '/js/messages.js'
    , '/js/server.js'

    , '/js/models/user.js'
    , '/js/models/puzzle.js'

    , '/js/collections/pieces.js'
    , '/js/collections/leaders.js'
    , '/js/collections/twenty.js'
    
    , '/js/helpers/statics.js'
    , '/js/helpers/loader.js'

    , '/js/views/puzzle.js'
    , '/js/views/piece.js'
    , '/js/views/title.js'
    , '/js/views/viewport.js'
    , '/js/views/frame.js'
    , '/js/views/dialogs.js'
    , '/js/views/panels.js'
    
    , '/js/views/precious/blinker.js'
    , '/js/views/precious/scoreBlower.js'
    , '/js/views/precious/lockingTooltips.js'
    , '/js/views/precious/selectionIndicator.js'

    , '/js/app.js'
    ].forEach(function(src) { %>
<script src="<%=(config.staticUrl + src)%>"></script><%
    });
} %>

<script src="http://connect.facebook.net/en_US/all.js#xfbml=1" async="true"></script>
<script src="http://platform.twitter.com/widgets.js" async="true"></script>

<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>